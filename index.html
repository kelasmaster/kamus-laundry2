<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Cari istilah terkait laundry di Kamus Laundry.">
  <title>Kamus Laundry</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="container">
    <h1>Kamus Laundry</h1>
    <p>Cari istilah terkait laundry:</p>
    <form id="searchForm">
      <input type="text" id="searchInput" placeholder="Contoh: mesin cuci" required />
      <button type="submit">Cari</button>
    </form>
    <div id="result"></div>
  </div>
  <script>
    const express = require('express');
const axios = require('axios');
const path = require('path');
const app = express();
const PORT = 3000;

// Set EJS as the templating engine
app.set('view engine', 'ejs');
app.set('views', path.join(__dirname, 'views'));

// Serve static files
app.use(express.static(path.join(__dirname, 'public')));

// Route for the homepage
app.get('/kamus-laundry', (req, res) => {
  res.render('layout', {
    title: 'Kamus Laundry',
    description: 'Cari istilah terkait laundry.',
    content: '<p>Masukkan istilah untuk mendapatkan deskripsi.</p>',
  });
});

// Dynamic route for individual terms
app.get('/kamus-laundry/:term', async (req, res) => {
  const term = req.params.term;
  const apiUrl = `https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(term)}`;

  try {
    const response = await axios.get(apiUrl);
    const data = response.data;

    res.render('layout', {
      title: `${data.title} - Kamus Laundry`,
      description: data.extract || 'Deskripsi tidak tersedia.',
      content: `
        <h1>${data.title}</h1>
        <p>${data.extract || 'Deskripsi tidak tersedia.'}</p>
      `,
    });
  } catch (error) {
    res.status(404).render('layout', {
      title: 'Halaman Tidak Ditemukan - Kamus Laundry',
      description: 'Istilah yang Anda cari tidak ditemukan.',
      content: '<p>Istilah tidak ditemukan. Silakan coba istilah lain.</p>',
    });
  }
});

// Handle search redirection
app.get('/kamus-laundry/search', (req, res) => {
  const query = req.query.q.trim().toLowerCase();
  if (query) {
    res.redirect(`/kamus-laundry/${encodeURIComponent(query)}`);
  } else {
    res.redirect('/kamus-laundry');
  }
});

// Start the server
app.listen(PORT, () => {
  console.log(`Server running on http://localhost:${PORT}`);
});
  </script>
</body>
</html>
